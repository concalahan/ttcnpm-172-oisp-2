+function(n){var t={urlObj:{getCart:"",updateCart:"",deleteCart:""},init:function(){t.load.event();t.load.getCart();t.action.setPositionLoader()},load:{event:function(){n(".body-cart").on("change",".txtCartQty",function(){var i=n(this).val(),r=n(this).parents(".cart_row").attr("data-id");t.action.updateCart(r,i)});n(".body-cart").on("click",".btn-remove",function(){var i=n(this).parents(".cart_row").attr("data-id");t.action.deleteCart(i)})},getCart:function(){n("body").addClass("loading");n.ajax({url:t.urlObj.getCart,type:"POST",success:function(i){var r=t.template.createTemplateCart(i.info);n(".body-cart").html(r.join(""));n(".total-price").html(i.totalMoneyFormat);n("body").removeClass("loading")}})}},action:{updateCart:function(i,r){n.ajax({url:t.urlObj.updateCart,type:"POST",data:{productId:i,quantity:r},success:function(){t.load.getCart()}})},deleteCart:function(i){n.ajax({url:t.urlObj.deleteCart,type:"POST",data:{productId:i},success:function(){t.load.getCart()}})},setPositionLoader:function(){var t=n(".cart_page").offset().top+100;n(".loading-bar").css({top:t})}},template:{createTemplateCart:function(n){for(var t=[],i,r=0;r<n.length;r++)i=n[r],t.push('<div class="cart_row" data-id="'+i.PRODUCT_ID+'">'),t.push('<div class="img_cart"> <a href="'+i.URL_RETURN+'"> <img class="img_general" src="'+i.PRODUCT_IMAGE_FORMAT+'" alt="'+i.PRODUCT_NAME+'" /><\/a><\/div>'),t.push('<div class="detail-cart">'),t.push(' <div class="cell name">'),t.push('<div> <span><a href="'+i.URL_RETURN+'"> '+i.PRODUCT_NAME+'<\/a><\/span> <a class="remove_cart btn-remove"><i class="glyphicon glyphicon-trash" /><\/i><\/a><\/div>'),t.push("<\/div>"),t.push('<div class="cell unit"> <span class="old"><del> '+i.PRODUCT_PRICE_FORMAT+'<\/del><\/span> <span class="new"><b>'+i.PRODUCT_PRICE_PROMOS_FORMAT+"<\/b><\/span><\/div>"),t.push('<div class="cell amount">'),t.push('<div class="quantity" style="margin: 0">'),t.push('<input type="number" class="txtCartQty" value="'+i.QUANTITY+'">'),t.push("<\/div>"),t.push("<\/div>"),t.push('<div class="cell total"> '+i.TOTAL_PRICE_FORMAT+"<\/div>"),t.push("<\/div>"),t.push("<\/div>");return t}}};n(function(){t.urlObj.getCart="/Cart/GetCarts";t.urlObj.updateCart="/Cart/UpdateCart";t.urlObj.deleteCart="/Cart/DeleteCart";t.init()})}(window.jQuery)