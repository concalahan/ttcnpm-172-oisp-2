var loginR={urlObj:{checkLogin:"/Account/Login"},postData:{EMAIL:"",PASSWORD:""},init:function(){loginR.load.event()},load:{event:function(){$("#btnLogin").click(function(){loginR.action.setPostData();var n=loginR.action.validateInput();n?$(".login-notify").html(n):loginR.action.signIn()});$("#txtemail").keypress(function(n){n.which==13&&$("#btnLogin").trigger("click")});$("#txtpass").keypress(function(n){n.which==13&&$("#btnLogin").trigger("click")});$(".btn-login-payment").click(function(){loginR.action.setPostDataPayment();var n=loginR.action.validateInput();n?showDialog(n,"Cảnh báo"):loginR.action.signInPayment()})}},action:{signIn:function(){$.ajax({url:loginR.urlObj.checkLogin,data:loginR.postData,type:"POST",success:function(n){n.IsSuccess?document.location=n.ReturnUrl:$(".login-notify").html(n.Msg)}})},signInPayment:function(){$.ajax({url:loginR.urlObj.checkLogin,data:loginR.postData,type:"POST",success:function(n){n.IsSuccess?document.location="/thanh-toan":showDialog(n.Msg,"Thông báo")}})},setPostData:function(){loginR.postData.EMAIL=$("#txtemail").val();loginR.postData.PASSWORD=$("#txtpass").val()},setPostDataPayment:function(){loginR.postData.EMAIL=$('input[data-name="email-login"]').val();loginR.postData.PASSWORD=$('input[data-name="pass-login"]').val()},validateInput:function(){var n="";return loginR.postData.EMAIL?loginR.postData.PASSWORD||(n="Vui lòng nhập mật khẩu"):n="Vui lòng nhập email",n}}},emailR={urlObj:{register:"/Account/RegisterEmailReceiver"},postData:{EMAIL:""},init:function(){emailR.load.event()},load:{event:function(){$(".btn_registeremail").click(function(){emailR.action.setPostData();var n=emailR.action.validateInput();n?showDialog(n,"Cảnh báo"):emailR.action.registerEmail()})}},action:{registerEmail:function(){$.ajax({url:emailR.urlObj.register,data:emailR.postData,type:"POST",success:function(n){n.Msg||(n.Msg="Đăng ký thành công",emailR.action.resetForm());showDialog(n.Msg,"Thông báo")}})},setPostData:function(){emailR.postData.EMAIL=$(".email-reciver").val()},resetForm:function(){$(".email-reciver").val("")},validateInput:function(){var n="";return emailR.postData.EMAIL?emailR.postData.EMAIL&&!checkEmail(emailR.postData.EMAIL)&&(n="Email chưa đúng định dạng"):n="Vui lòng nhập email",n}}}